<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PostPilot | The Picks - Shared Mailer Strategy Calculator</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <script src="https://unpkg.com/react@17/umd/react.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
        }
        
        .postpilot-blue {
            color: #1E40AF;
        }
        
        .postpilot-bg-blue {
            background-color: #1E40AF;
        }
    </style>
</head>
<body class="bg-gray-50">
    <div id="root"></div>

    <script type="text/babel">
        const PostPilotCalculator = () => {
            // State variables for form inputs
            const [brandInfo, setBrandInfo] = React.useState({
                monthlySales: '',
                aov: '',
                industry: 'baby',
                targetAudience: 'new_parents',
                goalRoas: 1,
                budgetConstraint: false,
                productType: 'physical',
                hasRepeatCustomers: true,
                existingCustomerCount: '',
                expectedCampaignCvr: '' // Changed to expected campaign CVR
            });
            
            // State for results
            const [showResults, setShowResults] = React.useState(false);
            const [results, setResults] = React.useState({
                recommendedTheme: '',
                recommendedFormat: '',
                estimatedRoas: 0,
                pricingRecommendation: '',
                audienceSize: 0,
                additionalRecommendations: [],
                successRate: 0,
                estimatedCvr: 0
            });
            
            // Theme data with historical performance based on ACTUAL data analysis
            const themeData = {
                newMoms: { 
                    avgRoas: 5.18, 
                    medianRoas: 1.54,
                    successRate: 0.57, 
                    avgCvr: 0.46, // Average campaign CVR percentage for this theme
                    bestFor: ['baby', 'parenting', 'health'],
                    minAov: 50,
                    aovImpact: {
                        '$50-$100': { avgRoas: 7.84, medianRoas: 3.12, avgCvr: 0.79 },
                        '$100-$200': { avgRoas: 3.54, medianRoas: 1.77, avgCvr: 0.35 },
                        'Over $200': { avgRoas: 4.74, medianRoas: 1.89, avgCvr: 0.26 }
                    }
                },
                newMovers: { 
                    avgRoas: 2.03, 
                    medianRoas: 0.86, 
                    successRate: 0.44, 
                    avgCvr: 0.04, // Very low CVR for this theme
                    bestFor: ['home', 'furniture', 'decor'],
                    minAov: 100
                },
                newYear: { 
                    avgRoas: 2.23, 
                    medianRoas: 1.36, 
                    successRate: 0.53, 
                    avgCvr: 0.20,
                    bestFor: ['fitness', 'health', 'apparel'],
                    minAov: 40
                },
                giftGuide: { 
                    avgRoas: 1.11, 
                    medianRoas: 0.34, 
                    successRate: 0.38, 
                    avgCvr: 0.10,
                    bestFor: ['apparel', 'accessories', 'luxury'],
                    minAov: 60
                },
                healthyLiving: { 
                    avgRoas: 1.83, 
                    medianRoas: 1.42, 
                    successRate: 0.67, 
                    avgCvr: 0.18,
                    bestFor: ['health', 'beauty', 'food', 'fitness'],
                    minAov: 40
                },
                petParents: { 
                    avgRoas: 2.47, 
                    medianRoas: 0.72, 
                    successRate: 0.20, 
                    avgCvr: 0.09,
                    bestFor: ['pet'],
                    minAov: 30
                },
                modernMale: { 
                    avgRoas: 1.36, 
                    medianRoas: 0.82, 
                    successRate: 0.38, 
                    avgCvr: 0.12,
                    bestFor: ['apparel', 'tech', 'outdoor'],
                    minAov: 75
                }
            };
            
            // Format options with cost and minimum recommended audience size
            const formatOptions = {
                postcard: { cost: 0.586, minSize: 50000, recommended: 'Low budget, simple offer' },
                cardalog: { cost: 0.774, minSize: 50000, recommended: 'Multiple products, lifestyle focus' },
                miniCatalog: { cost: 0.82, minSize: 50000, recommended: 'Premium brands, complex offers' }
            };
            
            // Handle input changes
            const handleInputChange = (e) => {
                const { name, value, type, checked } = e.target;
                setBrandInfo({
                ...brandInfo,
                [name]: type === 'checkbox' ? checked : value
                });
            };
            
            // Calculate recommended strategy
            const calculateStrategy = () => {
                // Parse inputs
                const monthlySales = parseFloat(brandInfo.monthlySales);
                const aov = parseFloat(brandInfo.aov);
                
                // Determine recommended theme based on industry and target audience
                let bestTheme = null;
                let highestScore = 0;
                
                Object.entries(themeData).forEach(([theme, data]) => {
                    let score = 0;
                    
                    // Score based on industry match
                    if (data.bestFor.includes(brandInfo.industry)) score += 5;
                    
                    // Score based on target audience match
                    if (brandInfo.targetAudience === 'new_parents' && theme === 'newMoms') score += 5;
                    if (brandInfo.targetAudience === 'home_buyers' && theme === 'newMovers') score += 5;
                    if (brandInfo.targetAudience === 'health_conscious' && theme === 'healthyLiving') score += 5;
                    if (brandInfo.targetAudience === 'health_conscious' && theme === 'newYear') score += 4;
                    if (brandInfo.targetAudience === 'gift_givers' && theme === 'giftGuide') score += 5;
                    if (brandInfo.targetAudience === 'pet_owners' && theme === 'petParents') score += 5;
                    if (brandInfo.targetAudience === 'male_focused' && theme === 'modernMale') score += 5;
                    
                    // Adjust weighting for success rate - MORE important based on analysis
                    score += (data.successRate * 15); // Increased from 10 to 15
                    
                    // Update best theme if current theme has higher score
                    if (score > highestScore) {
                        highestScore = score;
                        bestTheme = theme;
                    }
                });
                
                // If no theme had a good match, default to newMoms (proven best performer)
                if (!bestTheme) {
                    bestTheme = 'newMoms';
                }
                
                // Determine recommended format based on AOV and monthly sales
                let recommendedFormat = 'cardalog'; // Default
                if (aov > 200) {
                    recommendedFormat = 'miniCatalog'; // Higher-end format for higher AOV
                } else if ((aov < 50 || monthlySales < 100000) && brandInfo.budgetConstraint) {
                    recommendedFormat = 'postcard'; // Budget-friendly for low AOV or sales
                }
                
                // Estimate the campaign conversion rate based on theme and AOV
                let estimatedCvr = themeData[bestTheme].avgCvr;
                
                // Adjust CVR based on AOV ranges (from data analysis)
                if (bestTheme === 'newMoms') {
                    if (aov > 50 && aov <= 100) {
                        estimatedCvr = themeData[bestTheme].aovImpact['$50-$100'].avgCvr;
                    } else if (aov > 100 && aov <= 200) {
                        estimatedCvr = themeData[bestTheme].aovImpact['$100-$200'].avgCvr;
                    } else if (aov > 200) {
                        estimatedCvr = themeData[bestTheme].aovImpact['Over $200'].avgCvr;
                    }
                } else {
                    // General patterns from data for other themes
                    if (aov <= 25) {
                        estimatedCvr = 0.02; // Very low CVR for very low AOV
                    } else if (aov > 25 && aov <= 50) {
                        estimatedCvr = 0.35; // Low AOV has higher CVR
                    } else if (aov > 50 && aov <= 100) {
                        estimatedCvr = 0.32; // Medium AOV has good CVR
                    } else if (aov > 100 && aov <= 200) {
                        estimatedCvr = 0.19; // High AOV has moderate CVR
                    } else if (aov > 200) {
                        estimatedCvr = 0.10; // Very high AOV has lower CVR
                    }
                }
                
                // If the user provided an expected CVR, use that with a small adjustment
                // based on our data insights
                if (brandInfo.expectedCampaignCvr) {
                    const userCvr = parseFloat(brandInfo.expectedCampaignCvr) / 100;
                    // Blend user expectation with our data (giving more weight to user input)
                    estimatedCvr = (userCvr * 0.7) + (estimatedCvr * 0.3);
                }
                
                // Calculate estimated ROAS based on more accurate predictors from our analysis
                // Start with base ROAS for the theme
                let estimatedRoas = themeData[bestTheme].medianRoas;
                
                // Apply theme-specific adjustments based on data analysis
                switch(bestTheme) {
                    case 'newMoms':
                        // New Moms - Strongest theme overall
                        estimatedRoas *= 1.2; // 20% boost to base
                        break;
                    case 'newYear':
                        // New Year showed good performance for high AOV
                        if (aov > 100) estimatedRoas *= 1.1; // 10% boost for high AOV
                        break;
                    case 'giftGuide':
                        // Gift Guide showed strong AOV correlation
                        if (aov > 100) estimatedRoas *= 1.3; // 30% boost for high AOV
                        else estimatedRoas *= 0.8; // 20% reduction for low AOV
                        break;
                    case 'newMovers':
                        // New Movers - Only works well with high AOV
                        if (aov < 200) estimatedRoas *= 0.7; // 30% reduction for lower AOV
                        break;
                }
                
                // AOV Range adjustments (based on our analysis, not theme-specific)
                if (aov <= 25) {
                    // Very Low AOV performs poorly
                    estimatedRoas *= 0.05; // 95% reduction (showed only 0.06x ROAS in data)
                } else if (aov > 25 && aov <= 50) {
                    // Low AOV usually underperforms
                    estimatedRoas *= 0.75; // 25% reduction
                } else if (aov > 50 && aov <= 100) {
                    // Medium AOV performs well
                    estimatedRoas *= 1.15; // 15% boost
                } else if (aov > 100 && aov <= 200) {
                    // High AOV performs consistently
                    estimatedRoas *= 1.05; // 5% boost
                } else if (aov > 200) {
                    // Very High AOV - performs best overall but varies by theme
                    // (theme-specific adjustments already applied above)
                    estimatedRoas *= 1.1; // Additional 10% boost
                }
                
                // Monthly sales impact - adjusted to use monthly rather than annual
                if (monthlySales > 5000000) {
                    // Major brands with very high revenue
                    estimatedRoas *= 1.3; // 30% boost
                } else if (monthlySales > 1000000) {
                    // Large brands
                    estimatedRoas *= 1.2; // 20% boost
                } else if (monthlySales > 500000) {
                    // Medium-large brands
                    estimatedRoas *= 1.1; // 10% boost
                } else if (monthlySales < 50000) {
                    // Very small brands
                    estimatedRoas *= 0.8; // 20% reduction
                }
                
                // Factor in historical success rate as a confidence multiplier
                const confidenceMultiplier = 0.7 + (0.3 * themeData[bestTheme].successRate);
                estimatedRoas = estimatedRoas * confidenceMultiplier;
                
                // Apply product type adjustment
                if (brandInfo.productType === 'subscription') {
                    estimatedRoas *= 0.8; // 20% reduction for immediate ROAS
                }
                
                // Determine audience size based on monthly sales and theme
                let audienceSize = 50000; // Base size
                if (bestTheme === 'newMoms') {
                    if (monthlySales > 2000000) {
                        audienceSize = 200000;
                    } else if (monthlySales > 500000) {
                        audienceSize = 100000;
                    }
                } else {
                    // Other themes - more conservative sizing
                    if (monthlySales > 5000000) {
                        audienceSize = 150000;
                    } else if (monthlySales > 2000000) {
                        audienceSize = 100000;
                    }
                }
                
                // Adjust based on AOV for cost efficiency
                if (aov < 50 && audienceSize > 50000) {
                    audienceSize = 50000; // Cap size for low AOV to ensure efficiency
                }
                
                // Determine pricing recommendation based on AOV and monthly sales
                let pricingRecommendation = '';
                if (aov > 200) {
                    // High AOV brands - revenue share performs better
                    pricingRecommendation = 'Revenue share: 8-10% of generated revenue';
                } else if (aov > 100) {
                    // Medium-high AOV
                    pricingRecommendation = 'Mixed: $4,000 base + 5% revenue share';
                } else if (monthlySales > 2000000) {
                    // Large brands
                    pricingRecommendation = '$8,000 flat fee OR 7% revenue share';
                } else if (monthlySales > 500000) {
                    // Medium brands
                    pricingRecommendation = '$6,000 flat fee OR 10% revenue share';
                } else {
                    // Small brands
                    pricingRecommendation = '$3,000 flat fee OR 12% revenue share';
                }
                
                // Additional recommendations based on data insights
                const additionalRecommendations = [];
                
                // Theme-specific recommendations based on data analysis
                if (bestTheme === 'newMoms') {
                    additionalRecommendations.push('New Moms consistently delivers the highest ROAS across all themes (avg 5.18x).');
                    additionalRecommendations.push(`Expected campaign conversion rate: ${(estimatedCvr * 100).toFixed(2)}% (New Moms average: ${(themeData[bestTheme].avgCvr * 100).toFixed(2)}%)`);
                    if (aov > 100 && aov <= 200) {
                        additionalRecommendations.push('Your AOV falls in the $100-$200 range, which performs well in New Moms campaigns (avg 3.54x ROAS).');
                    } else if (aov > 50 && aov <= 100) {
                        additionalRecommendations.push('Your AOV falls in the $50-$100 range, which performs excellently in New Moms campaigns (avg 7.84x ROAS).');
                    }
                } else if (bestTheme === 'newMovers') {
                    additionalRecommendations.push('New Movers campaigns work best with high-AOV products (>$200). Consider testing with a smaller audience first.');
                    additionalRecommendations.push(`Expected campaign conversion rate: ${(estimatedCvr * 100).toFixed(2)}% (New Movers average: ${(themeData[bestTheme].avgCvr * 100).toFixed(2)}%)`);
                    if (aov < 100) {
                        additionalRecommendations.push('WARNING: Your AOV is lower than optimal for New Movers campaigns. Consider a different theme or increase price point.');
                    }
                } else if (bestTheme === 'giftGuide') {
                    additionalRecommendations.push('Gift Guide campaigns show a strong correlation between AOV and performance (correlation: 0.45).');
                    additionalRecommendations.push(`Expected campaign conversion rate: ${(estimatedCvr * 100).toFixed(2)}% (Gift Guide average: ${(themeData[bestTheme].avgCvr * 100).toFixed(2)}%)`);
                    if (aov > 100) {
                        additionalRecommendations.push('Your higher AOV should perform better than average in Gift Guide campaigns.');
                    }
                } else {
                    // Generic theme recommendation
                    additionalRecommendations.push(`Expected campaign conversion rate: ${(estimatedCvr * 100).toFixed(2)}% (Theme average: ${(themeData[bestTheme].avgCvr * 100).toFixed(2)}%)`);
                }
                
                // General insights from data analysis
                if (aov > 200) {
                    additionalRecommendations.push('Brands with AOV >$200 show an average ROAS of 3.16x across all themes, the highest of any AOV range.');
                } else if (aov > 50 && aov <= 100) {
                    additionalRecommendations.push('Your AOV falls in the $50-$100 range, which shows good overall performance (avg 2.57x ROAS) and high conversion rate (0.32%).');
                }
                
                // Success rate messaging
                if (themeData[bestTheme].successRate < 0.35) {
                    additionalRecommendations.push(`Note: Only ${Math.round(themeData[bestTheme].successRate * 100)}% of brands achieve a 1x+ ROAS in this theme. Consider multiple campaign testing.`);
                } else if (themeData[bestTheme].successRate > 0.55) {
                    additionalRecommendations.push(`This theme has a strong success rate with ${Math.round(themeData[bestTheme].successRate * 100)}% of brands achieving at least 1x ROAS.`);
                }
                
                // Apply realistic caps to estimated ROAS
                if (bestTheme === 'newMoms' && estimatedRoas > 8) {
                    estimatedRoas = 8;
                    additionalRecommendations.push('Top-performing New Moms brands have achieved up to 8x ROAS.');
                } else if (estimatedRoas > 5) {
                    estimatedRoas = 5;
                    additionalRecommendations.push('Your profile suggests high potential - our best performers see 5x+ ROAS.');
                } else if (estimatedRoas < 0.5) {
                    estimatedRoas = 0.5;
                    additionalRecommendations.push('Based on your profile, you may face challenges achieving positive ROAS. Consider adjusting your offer or audience targeting.');
                }
                
                // Round ROAS to 1 decimal place
                estimatedRoas = Math.round(estimatedRoas * 10) / 10;
                
                // Set results
                setResults({
                    recommendedTheme: formatThemeName(bestTheme),
                    recommendedFormat,
                    estimatedRoas,
                    pricingRecommendation,
                    audienceSize,
                    additionalRecommendations,
                    successRate: Math.round(themeData[bestTheme].successRate * 100),
                    estimatedCvr
                });
                
                setShowResults(true);
            };
            
            // Format theme name for display
            const formatThemeName = (theme) => {
                switch(theme) {
                case 'newMoms': return 'New Moms';
                case 'newMovers': return 'New Movers';
                case 'newYear': return 'New Year New You';
                case 'giftGuide': return 'Gift Guide';
                case 'healthyLiving': return 'Healthy Living';
                case 'petParents': return 'Pet Parents';
                case 'modernMale': return 'Modern Male';
                default: return theme;
                }
            };
            
            // Format audience size for display
            const formatAudienceSize = (size) => {
                return size.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
            };
            
            // Handle form submission
            const handleSubmit = (e) => {
                e.preventDefault();
                calculateStrategy();
            };
            
            return (
                <div className="flex flex-col min-h-screen bg-gray-50">
                    {/* Header */}
                    <header className="bg-white shadow-sm py-4">
                        <div className="container mx-auto px-4 flex items-center justify-between">
                            <div className="flex items-center">
                                <div className="text-2xl font-bold postpilot-blue">PostPilot</div>
                                <div className="ml-2 px-2 py-1 bg-blue-100 postpilot-blue text-xs font-semibold rounded">The Picks</div>
                            </div>
                            <div className="text-sm text-gray-500">Shared Mailer Strategy Calculator</div>
                        </div>
                    </header>
                    
                    {/* Main Content */}
                    <main className="flex-grow container mx-auto px-4 py-8">
                        <div className="max-w-4xl mx-auto">
                            <h1 className="text-3xl font-bold text-gray-900 mb-2">Find Your Ideal Shared Mailer Strategy</h1>
                            <p className="text-gray-600 mb-6">Based on real performance data from 143 brand campaigns</p>
                            
                            {!showResults ? (
                                <div className="bg-white shadow-md rounded-lg p-6">
                                    <form onSubmit={handleSubmit}>
                                        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                            {/* Monthly Sales */}
                                            <div className="col-span-1">
                                                <label className="block text-sm font-medium text-gray-700 mb-1">
                                                    Monthly Sales ($)
                                                </label>
                                                <input
                                                    type="number"
                                                    name="monthlySales"
                                                    value={brandInfo.monthlySales}
                                                    onChange={handleInputChange}
                                                    className="block w-full rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500"
                                                    required
                                                />
                                            </div>
                                        
                                        {/* Campaign Conversion Analysis */}
                                        <div className="mt-6 p-4 border border-green-200 rounded-lg bg-green-50">
                                            <h3 className="text-sm font-semibold text-green-800 mb-2">Campaign Conversion Analysis</h3>
                                            <div className="grid grid-cols-2 gap-4">
                                                <div>
                                                    <p className="text-xs font-semibold text-gray-700">Estimated CVR:</p>
                                                    <p className="text-2xl font-bold text-gray-900">{(results.estimatedCvr * 100).toFixed(2)}%</p>
                                                </div>
                                                <div>
                                                    <p className="text-xs font-semibold text-gray-700">Estimated Orders:</p>
                                                    <p className="text-2xl font-bold text-gray-900">{Math.round(results.audienceSize * results.estimatedCvr).toLocaleString()}</p>
                                                </div>
                                            </div>
                                            <p className="text-xs text-gray-600 mt-3">
                                                Based on historical performance data from similar campaigns in the {results.recommendedTheme} theme with comparable AOV.
                                            </p>
                                        </div>
                                        
                                        {/* Action Buttons */}
                                        <div className="mt-8 flex flex-col sm:flex-row gap-4">
                                            <button
                                                onClick={() => setShowResults(false)}
                                                className="flex-1 bg-white border border-blue-600 postpilot-blue py-2 px-4 rounded-md hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"
                                            >
                                                Recalculate
                                            </button>
                                            <button
                                                onClick={() => window.location.href = "mailto:caroline@postpilot.com?subject=The Picks Shared Mailer Inquiry&body=I'm interested in learning more about The Picks shared mailer program. My calculator results recommended " + results.recommendedTheme + " with an estimated ROAS of " + results.estimatedRoas + "x and CVR of " + (results.estimatedCvr * 100).toFixed(2) + "%."}
                                                className="flex-1 postpilot-bg-blue text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"
                                            >
                                                Contact Sales Team
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            )}
                        </div>
                    </main>
                    
                    {/* Footer */}
                    <footer className="bg-gray-800 text-white py-6">
                        <div className="container mx-auto px-4">
                            <div className="flex flex-col md:flex-row justify-between items-center">
                                <div className="mb-4 md:mb-0">
                                    <div className="flex items-center">
                                        <div className="text-xl font-bold">PostPilot</div>
                                        <div className="ml-2 px-2 py-1 bg-blue-700 text-xs font-semibold rounded">The Picks</div>
                                    </div>
                                    <div className="text-xs text-gray-400 mt-1">Dynamic Direct Mail Made Easy for E-Commerce</div>
                                </div>
                                <div className="text-sm text-gray-400">
                                    © {new Date().getFullYear()} PostPilot. All rights reserved.
                                </div>
                            </div>
                        </div>
                    </footer>
                </div>
            );
        };

        ReactDOM.render(<PostPilotCalculator />, document.getElementById('root'));
    </script>
</body>
</html>
                                            
                                            {/* Pricing Recommendation */}
                                            <div className="col-span-1 bg-indigo-50 rounded-lg p-4">
                                                <h3 className="text-sm font-semibold text-indigo-800 mb-1">Pricing Recommendation</h3>
                                                <p className="text-xl font-bold text-gray-900">{results.pricingRecommendation}</p>
                                                <p className="text-xs text-gray-600 mt-1">Based on your AOV and business model</p>
                                            </div>
                                            
                                            {/* Additional Recommendations */}
                                            <div className="col-span-2">
                                                <h3 className="text-sm font-semibold text-gray-700 mb-2">Strategic Recommendations</h3>
                                                <ul className="list-disc pl-5 space-y-1">
                                                    {results.additionalRecommendations.map((rec, index) => (
                                                        <li key={index} className="text-gray-700">{rec}</li>
                                                    ))}
                                                </ul>
                                            </div>
                                        </div>
                                        
                                        {/* Campaign Cost Estimate */}
                                        <div className="mt-8 p-4 border border-gray-200 rounded-lg">
                                            <h3 className="text-sm font-semibold text-gray-700 mb-2">Campaign Cost & ROI Estimate</h3>
                                            <p className="text-gray-700">
                                                Base campaign cost: <span className="font-semibold">${Math.round(results.audienceSize * formatOptions[results.recommendedFormat].cost).toLocaleString()}</span>
                                            </p>
                                            <p className="text-gray-700 mt-2">
                                                Estimated orders: <span className="font-semibold">{Math.round(results.audienceSize * results.estimatedCvr).toLocaleString()}</span>
                                                <span className="text-xs text-gray-500 ml-2">(based on {(results.estimatedCvr * 100).toFixed(2)}% CVR)</span>
                                            </p>
                                            <p className="text-gray-700 mt-2">
                                                Estimated revenue: <span className="font-semibold">${Math.round(results.audienceSize * formatOptions[results.recommendedFormat].cost * results.estimatedRoas).toLocaleString()}</span>
                                                <span className="text-xs text-gray-500 ml-2">(based on {results.estimatedRoas}x ROAS)</span>
                                            </p>
                                            <p className="text-xs text-gray-500 mt-1">
                                                Based on {formatAudienceSize(results.audienceSize)} households at ${formatOptions[results.recommendedFormat].cost.toFixed(3)} per piece
                                            </p>
                                        </div>
                                        
                                        {/* Theme Performance Data */}
                                        <div className="mt-6 p-4 border border-blue-200 rounded-lg bg-blue-50">
                                            <h3 className="text-sm font-semibold postpilot-blue mb-2">Theme Performance Data</h3>
                                            <p className="text-sm text-gray-700 mb-2">
                                                The {results.recommendedTheme} theme has an average performance of {themeData[Object.keys(themeData).find(key => formatThemeName(key) === results.recommendedTheme)].avgRoas.toFixed(2)}x ROAS across all brands.
                                            </p>
                                            <div className="grid grid-cols-2 gap-2 mt-2">
                                                <div>
                                                    <p className="text-xs font-semibold text-gray-700">Average Campaign CVR:</p>
                                                    <p className="text-sm">{(themeData[Object.keys(themeData).find(key => formatThemeName(key) === results.recommendedTheme)].avgCvr * 100).toFixed(2)}%</p>
                                                </div>
                                                <div>
                                                    <p className="text-xs font-semibold text-gray-700">Success Rate:</p>
                                                    <p className="text-sm">{Math.round(themeData[Object.keys(themeData).find(key => formatThemeName(key) === results.recommendedTheme)].successRate * 100)}% of brands achieve 1x+ ROAS</p>
                                                </div>
                                            </div>
                                            <p className="text-sm font-semibold text-gray-700 mt-3">
                                                Performance by AOV range:
                                            </p>
                                            <ul className="mt-1 text-xs text-gray-600 space-y-1 ml-4">
                                                <li>$50-$100 AOV: 2.57x average ROAS (0.32% CVR)</li>
                                                <li>$100-$200 AOV: 2.19x average ROAS (0.19% CVR)</li>
                                                <li>Over $200 AOV: 3.16x average ROAS (0.10% CVR)</li>
                                            </ul>
                                        </div>
                                            
                                            {/* Average Order Value */}
                                            <div className="col-span-1">
                                                <label className="block text-sm font-medium text-gray-700 mb-1">
                                                    Average Order Value ($)
                                                </label>
                                                <input
                                                    type="number"
                                                    name="aov"
                                                    value={brandInfo.aov}
                                                    onChange={handleInputChange}
                                                    className="block w-full rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500"
                                                    required
                                                />
                                            </div>
                                            
                                            {/* Expected Campaign CVR */}
                                            <div className="col-span-1">
                                                <label className="block text-sm font-medium text-gray-700 mb-1">
                                                    Expected Campaign CVR (%)
                                                </label>
                                                <input
                                                    type="number"
                                                    name="expectedCampaignCvr"
                                                    value={brandInfo.expectedCampaignCvr}
                                                    onChange={handleInputChange}
                                                    placeholder="Optional"
                                                    step="0.01"
                                                    min="0"
                                                    max="100"
                                                    className="block w-full rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500"
                                                />
                                                <p className="mt-1 text-xs text-gray-500">Your expected conversion rate for this campaign</p>
                                            </div>
                                            
                                            {/* Industry */}
                                            <div className="col-span-1">
                                                <label className="block text-sm font-medium text-gray-700 mb-1">
                                                    Primary Industry
                                                </label>
                                                <select
                                                    name="industry"
                                                    value={brandInfo.industry}
                                                    onChange={handleInputChange}
                                                    className="block w-full rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500"
                                                >
                                                    <option value="baby">Baby & Parenting</option>
                                                    <option value="home">Home & Furnishings</option>
                                                    <option value="furniture">Furniture</option>
                                                    <option value="decor">Home Decor</option>
                                                    <option value="pet">Pet Products</option>
                                                    <option value="health">Health & Wellness</option>
                                                    <option value="fitness">Fitness & Sports</option>
                                                    <option value="beauty">Beauty & Skincare</option>
                                                    <option value="food">Food & Beverages</option>
                                                    <option value="apparel">Apparel & Fashion</option>
                                                    <option value="accessories">Accessories</option>
                                                    <option value="tech">Electronics & Tech</option>
                                                    <option value="outdoor">Outdoor & Recreation</option>
                                                    <option value="luxury">Luxury Goods</option>
                                                </select>
                                            </div>
                                            
                                            {/* Target Audience */}
                                            <div className="col-span-1">
                                                <label className="block text-sm font-medium text-gray-700 mb-1">
                                                    Target Audience
                                                </label>
                                                <select
                                                    name="targetAudience"
                                                    value={brandInfo.targetAudience}
                                                    onChange={handleInputChange}
                                                    className="block w-full rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500"
                                                >
                                                    <option value="new_parents">New Parents</option>
                                                    <option value="home_buyers">New Home Buyers</option>
                                                    <option value="health_conscious">Health & Fitness Enthusiasts</option>
                                                    <option value="gift_givers">Gift Shoppers</option>
                                                    <option value="pet_owners">Pet Owners</option>
                                                    <option value="male_focused">Male-Focused Products</option>
                                                    <option value="general">General Consumers</option>
                                                </select>
                                            </div>
                                            
                                            {/* Product Type */}
                                            <div className="col-span-1">
                                                <label className="block text-sm font-medium text-gray-700 mb-1">
                                                    Product Type
                                                </label>
                                                <select
                                                    name="productType"
                                                    value={brandInfo.productType}
                                                    onChange={handleInputChange}
                                                    className="block w-full rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500"
                                                >
                                                    <option value="physical">Physical Products</option>
                                                    <option value="subscription">Subscription Service</option>
                                                    <option value="hybrid">Hybrid (Products & Services)</option>
                                                </select>
                                            </div>
                                            
                                            {/* Goal ROAS */}
                                            <div className="col-span-1">
                                                <label className="block text-sm font-medium text-gray-700 mb-1">
                                                    Target ROAS
                                                </label>
                                                <select
                                                    name="goalRoas"
                                                    value={brandInfo.goalRoas}
                                                    onChange={handleInputChange}
                                                    className="block w-full rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500"
                                                >
                                                    <option value="1">1x (Break Even)</option>
                                                    <option value="2">2x</option>
                                                    <option value="3">3x</option>
                                                    <option value="5">5x</option>
                                                    <option value="10">10x+</option>
                                                </select>
                                            </div>
                                            
                                            {/* Budget Constraint */}
                                            <div className="col-span-1">
                                                <label className="flex items-center">
                                                    <input
                                                        type="checkbox"
                                                        name="budgetConstraint"
                                                        checked={brandInfo.budgetConstraint}
                                                        onChange={handleInputChange}
                                                        className="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"
                                                    />
                                                    <span className="ml-2 text-sm text-gray-700">Budget Constrained</span>
                                                </label>
                                            </div>
                                            
                                            {/* Has Repeat Customers */}
                                            <div className="col-span-1">
                                                <label className="flex items-center">
                                                    <input
                                                        type="checkbox"
                                                        name="hasRepeatCustomers"
                                                        checked={brandInfo.hasRepeatCustomers}
                                                        onChange={handleInputChange}
                                                        className="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"
                                                    />
                                                    <span className="ml-2 text-sm text-gray-700">Has Repeat Customers</span>
                                                </label>
                                            </div>
                                        </div>
                                        
                                        {/* Data Source Notice */}
                                        <div className="mt-4 p-3 bg-blue-50 rounded-md">
                                            <p className="text-xs text-gray-600">
                                                <span className="font-semibold">Data-Driven Predictions:</span> This calculator uses performance data from 143 real brand campaigns across multiple industries and AOV ranges. Our data shows campaign conversion rates vary significantly by theme, with New Moms averaging 0.46% and New Movers just 0.04%.
                                            </p>
                                        </div>
                                        
                                        <div className="mt-6">
                                            <button
                                                type="submit"
                                                className="w-full postpilot-bg-blue text-white py-3 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"
                                            >
                                                Calculate Optimal Strategy
                                            </button>
                                        </div>
                                    </form>
                                </div>
                            ) : (
                                <div className="bg-white shadow-md rounded-lg overflow-hidden">
                                    {/* Results Header */}
                                    <div className="postpilot-bg-blue px-6 py-4">
                                        <h2 className="text-xl font-bold text-white">Your Recommended Shared Mailer Strategy</h2>
                                    </div>
                                    
                                    {/* Results Content */}
                                    <div className="p-6">
                                        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                            {/* Recommended Theme */}
                                            <div className="col-span-1 bg-blue-50 rounded-lg p-4">
                                                <h3 className="text-sm font-semibold postpilot-blue mb-1">Recommended Theme</h3>
                                                <p className="text-xl font-bold text-gray-900">{results.recommendedTheme}</p>
                                                <p className="text-xs text-gray-500 mt-1">Based on your industry, audience & metrics</p>
                                            </div>
                                            
                                            {/* Recommended Format */}
                                            <div className="col-span-1 bg-blue-50 rounded-lg p-4">
                                                <h3 className="text-sm font-semibold postpilot-blue mb-1">Recommended Format</h3>
                                                <p className="text-xl font-bold text-gray-900 capitalize">{results.recommendedFormat}</p>
                                                <p className="text-xs text-gray-500 mt-1">{formatOptions[results.recommendedFormat].recommended}</p>
                                            </div>
                                            
                                            {/* Estimated ROAS */}
                                            <div className="col-span-1 bg-green-50 rounded-lg p-4">
                                                <h3 className="text-sm font-semibold text-green-800 mb-1">Estimated ROAS</h3>
                                                <p className="text-xl font-bold text-gray-900">{results.estimatedRoas}x</p>
                                                <p className="text-xs text-gray-600 mt-1">{results.successRate}% of brands achieve at least 1x ROAS in this theme</p>
                                            </div>
                                            
                                            {/* Campaign CVR */}
                                            <div className="col-span-1 bg-green-50 rounded-lg p-4">
                                                <h3 className="text-sm font-semibold text-green-800 mb-1">Estimated Campaign CVR</h3>
                                                <p className="text-xl font-bold text-gray-900">{(results.estimatedCvr * 100).toFixed(2)}%</p>
                                                <p className="text-xs text-gray-600 mt-1">Percentage of recipients likely to convert</p>
                                            </div>
                                            
                                            {/* Audience Size */}
                                            <div className="col-span-1 bg-indigo-50 rounded-lg p-4">
                                                <h3 className="text-sm font-semibold text-indigo-800 mb-1">Recommended Audience Size</h3>
                                                <p className="text-xl font-bold text-gray-900">{formatAudienceSize(results.audienceSize)} households</p>
                                                <p className="text-xs text-gray-600 mt-1">Optimized for your AOV and campaign metrics</p>
                                            </div>
